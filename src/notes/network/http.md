---
Created At: 8/19/2025, 2:38:12 PM
Updated At: 8/19/2025, 4:12:26 PM
File Name: http
---

# http

## HTTP/1.1 VS. HTTP/2

##  **HTTP 方法（HTTP verbs）**

> 幂等（idempotent）:
> * 计算机和网络中: "同样的操作执行一次和执行多次，结果都是一样的，不会产生额外副作用。" 也就是重复执行不改变结果。
>
> * HTTP 中:
>   * 幂等方法：多次调用不会改变服务器的最终状态。
>   * 非幂等方法：多次调用会改变服务器状态，每次可能产生不同结果。
>

### **1. GET**

* **用途**：请求获取资源（从服务器读取数据）。
* **特点**：

  * 安全（`safe`）：不会修改服务器状态。
  * 幂等（`idempotent`）：重复请求结果相同。
  * 可缓存，参数在 URL 中传递（Query String）。
* **场景**：

  * 获取列表或详情，例如：`GET /users` 或 `GET /users/1`
* **注意**：GET 请求不适合传输敏感信息或大数据量（URL 长度限制(maximum URL length is 2048 characters)）。

---

### **2. POST**

* **用途**：向服务器提交数据，通常用于 **创建资源或触发操作**。
* **特点**：

  * 不安全（可能改变服务器状态）。
  * 不幂等：重复提交可能创建多个资源。
  * 数据在请求体（body）中发送。
* **场景**：

  * 创建新用户：`POST /users`，body：`{ "name": "Alice" }`
  * 提交表单、上传文件
* **注意**：服务端可能会返回 `201 Created` 表示资源已创建。

---

### **3. PUT**

* **用途**：**更新资源的全部内容**，如果不存在可以创建（有些实现支持）。
* **特点**：

  * 不安全。
  * 幂等：多次 PUT 同样数据，结果相同。
* **场景**：

  * 更新用户信息：`PUT /users/1`，body：`{ "name": "Bob" }`
* **区别 POST**：PUT 是“全量覆盖更新”，POST 更灵活/不幂等。

---

### **4. PATCH**

* **用途**：**部分更新资源**（只修改传入的字段）。
* **特点**：

  * 不安全。
  * 幂等（取决于实现，但通常是幂等）。
* **场景**：

  * 更新用户昵称：`PATCH /users/1`，body：`{ "nickname": "Bobby" }`
* **区别 PUT**：PATCH 不覆盖整个资源，只修改部分字段。

---

### **5. DELETE**

* **用途**：删除资源。
* **特点**：

  * 不安全。
  * 幂等：删除同一个资源多次，结果相同（第一次删除成功，后续返回 404 或空）。
* **场景**：

  * 删除用户：`DELETE /users/1`
* **注意**：幂等性便于前端重复请求或重试。

---

### **6. HEAD**

* **用途**：获取资源的 **响应头信息**，不返回主体内容。
* **特点**：

  * 安全。
  * 幂等。
* **场景**：

  * 检查资源是否存在。
  * 获取文件大小、最后修改时间等元信息。
* **区别 GET**：HEAD 与 GET 返回相同的头，但没有 body。

---

### **7. OPTIONS**

* **用途**：查询服务器对资源支持哪些 HTTP 方法。
* **特点**：

  * 安全。
  * 幂等。
* **场景**：

  * 跨域请求（CORS）预检：浏览器先发送 `OPTIONS` 请求确认允许的方法。
* **返回**：`Allow` 头指示支持的方法列表。

---

### **8. CONNECT**

* **用途**：建立 **隧道（tunnel）** 连接，一般用于代理服务器转发 HTTPS。
* **特点**：

  * 不安全。
  * 幂等性不明确。
* **场景**：

  * HTTP 代理中，客户端想通过代理建立 TLS 连接。
  * 例如：`CONNECT proxy.example.com:443 HTTP/1.1`

---

### **9. TRACE**

* **用途**：回显服务器收到的请求，用于诊断。
* **特点**：

  * 安全。
  * 幂等。
* **场景**：

  * 测试代理或请求链是否篡改了请求。
* **注意**：实际生产中很少用，可能带来安全风险（XST 攻击）。

---

### **总结对比表**

| 方法      | 用途        | 安全 | 幂等 | 数据位置 | 典型场景       |
| ------- | --------- | -- | -- | ---- | ---------- |
| GET     | 获取资源      | ✅  | ✅  | URL  | 获取列表/详情    |
| POST    | 创建资源/提交数据 | ❌  | ❌  | Body | 表单提交、文件上传  |
| PUT     | 更新整个资源    | ❌  | ✅  | Body | 用户信息更新     |
| PATCH   | 更新部分资源    | ❌  | ✅  | Body | 更新部分字段     |
| DELETE  | 删除资源      | ❌  | ✅  | URL  | 删除用户       |
| HEAD    | 获取资源头     | ✅  | ✅  | URL  | 检查资源/文件元信息 |
| OPTIONS | 查询允许的方法   | ✅  | ✅  | URL  | CORS 预检    |
| CONNECT | 建立隧道      | ❌  | ❓  | -    | 代理 HTTPS   |
| TRACE   | 请求回显      | ✅  | ✅  | URL  | 调试请求       |

---
